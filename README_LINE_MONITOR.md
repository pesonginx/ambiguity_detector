# LINEヘルプセンター監視スクリプト

このスクリプトは、指定されたLINEヘルプセンターのウェブページを定期的に監視し、内容に変更があった場合に自動的にスクレイピングしてマークダウン形式で出力します。

## 機能

- **定期監視**: 設定可能な間隔でウェブページをチェック
- **変更検出**: MD5ハッシュを使用してコンテンツの変更を検出
- **マークダウン出力**: 変更されたコンテンツを構造化されたマークダウン形式で保存
- **状態管理**: 前回の状態を保存して継続的な監視を可能
- **ログ機能**: 詳細なログをファイルとコンソールに出力
- **設定ファイル**: JSON形式の設定ファイルで簡単にカスタマイズ

## 必要な環境

- Python 3.7以上
- 必要なパッケージ（requirements.txtに記載）

## インストール

1. 依存関係をインストール:
```bash
pip install -r requirements.txt
```

## 使用方法

### 基本的な使用方法

```bash
python line_help_monitor.py
```

### 設定のカスタマイズ

`config.json`ファイルを編集して設定を変更できます：

```json
{
  "url": "監視したいURL",
  "check_interval_minutes": 30,
  "output_directory": "line_help_output",
  "log_file": "line_help_monitor.log",
  "user_agent": "ブラウザのUser-Agent",
  "timeout_seconds": 30,
  "max_retries": 3
}
```

### 設定項目の説明

- `url`: 監視するLINEヘルプセンターのURL
- `check_interval_minutes`: 監視間隔（分）
- `output_directory`: 出力ファイルの保存ディレクトリ
- `log_file`: ログファイルの名前
- `user_agent`: ブラウザとして認識されるためのUser-Agent
- `timeout_seconds`: ページ取得のタイムアウト時間
- `max_retries`: 失敗時の再試行回数

## 出力ファイル

### マークダウンファイル
変更が検出された場合、以下の形式でファイルが作成されます：
- `line_help_YYYYMMDD_HHMMSS.md`: 変更されたコンテンツのマークダウン形式

### 差分情報ファイル
- `diff_YYYYMMDD_HHMMSS.txt`: 変更検出時の詳細情報

### 状態ファイル
- `monitor_state.json`: 前回の監視状態を保存

### ログファイル
- `line_help_monitor.log`: 詳細なログ情報

## マークダウン出力の形式

出力されるマークダウンファイルには以下の情報が含まれます：

```markdown
# ページタイトル

**最終更新**: 2024-01-01T12:00:00
**監視URL**: https://help.line.me/...

## セクション1
セクションの内容...

### サブセクション
サブセクションの内容...

- リスト項目1
- リスト項目2
```

## 監視の停止

プログラムを停止するには、`Ctrl+C`を押してください。

## トラブルシューティング

### よくある問題

1. **ページが取得できない**
   - ネットワーク接続を確認
   - URLが正しいか確認
   - サイトがアクセス可能か確認

2. **変更が検出されない**
   - 実際にページの内容が変更されているか確認
   - ログファイルでエラーがないか確認

3. **権限エラー**
   - 出力ディレクトリの書き込み権限を確認

### ログの確認

ログファイル（`line_help_monitor.log`）を確認して、詳細なエラー情報を取得できます。

## 注意事項

- このスクリプトは教育・研究目的で作成されています
- ウェブサイトの利用規約を遵守してご利用ください
- 過度なアクセスは避けてください
- 取得したデータの取り扱いには十分ご注意ください

## ライセンス

このスクリプトはMITライセンスの下で提供されています。 